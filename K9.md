# 9 Automation mit MIDI

MIDI ... Musical Instrument Digital Interface

## MIDI Spec

[MIDI website](https://www.midi.org/)

## Prinzip

- Status Byte ... MSB 1
- Data Byte 1 ... MSB 0
- Data Byte 2 ... MSB 0

MSB (Most Significant Bit)
![](K9/msb.png)

### Rheinfolge ist wichtig

![](K9/order.png)


## MIDI Objekte in Max

![MIDI](K9/midi.png)

- midiinfo ... midi hardware info
- midiin ... raw midi in
- midiout ... raw midi out
- bendin ... pitch bend in
- bendout ... pitch bend out
- notein ... note in
- noteout ... note out
- ctlin ... control in
- ctlout ... control out
- pgmin ... program change in
- pgmout ... program change out
- sysexin ... system exclusive in
- midiparse ... raw midi -> mehere Outlets
- midiformat ... mehrere Inlets -> raw midi
- midiselect ... midiparse + filter
- rtin ... midi realtime message

#### Realtime message

[MIDI Realtime Message](https://www.recordingblogs.com/wiki/midi-system-realtime-messages)

[MIDI Status Byte](https://www.midi.org/specifications-old/item/table-2-expanded-messages-list-status-bytes)

MIDI system realtime messages are messages that are not specific to a MIDI channel but prompt all devices on the MIDI system to respond and to do so in real time.

![char](K9/realtime.png)

A MIDI system realtime message – usually the MIDI clock message – can be placed *in the middle of another message without affecting this other message* or changing the MIDI running status. The realtime message can be recognized and handled appropriately, because its status byte has a topmost bit equal to 1, whereas the bytes of MIDI message data after the status byte have topmost bytes equal to 0, and because the length of system realtime messages is known.

#### experiment

![](K9/experiment.png)


## Kontrol mit DAW

### to Max 1 als DAW MIDI OUT

![](K9/dawout.png)

### to Max 1 als MIDI IN

![](K9/selection.png)

### Wiedergabe in DAW
![](K9/dawcontrol.png)

### in Max
![](K9/dawin.png)

## Synchronisierung mit MIDI

- MMC (MIDI Machine Control) ... start stop
- SPP (Song Position Pointer) ... schickt die genaue Position des Abspielkopfes
- MIDI Clock (MIDI Clock) ... Tempo abhägig clock
- MTC (MIDI Time Code) ... time code für Synchronisierung mit Video

Es gibt keine offizielle MIDI message für "Tempo" oder "Zeitstempel".

[Tweakhead Webseite](https://www.tweakheadz.com/sync_mmc_mtc_smpte.htm)


## Max als Sync Slave


### MMC (MIDI Machine Control)

- start (Status Byte 250 / realtime)
- stop (Status Byte 252 / realtime)
- continue (Status Byte 251 / realtime)

![](K9/mmc.png)

### MIDI Clock

- clock (Status Byte 248 / realtime)

![](K9/midi_clock.png)


#### MIDI Clock Hardware
[MIDI Clock - e-rm](https://www.e-rm.de/midiclock/)

### SPP (Song Position Pointer)

- Status Byte - 242
- Data Byte1	- MIDI Beats1
- Data Byte2	- MIDI Beats2

1 MIDI beat = sechzehntel

![SPP](K9/spp.png)


### MTC (MIDI Time Code)


##### Full time code (Wenn der Abspielkopf springt)

F0 7F 7F 01 01 *hh mm ss ff* F7

- F0 - 240 ... System Exclusive
- 7F ... real-time universal message
- 7F ... global broadcast
- 01 ... time code type
- 01 ... full time code
- 0rrhhhhh ... rate / hour
- 00mmmmmm ... minutes
- 00ssssss ... seconds
- 000fffff ... frame
- F7 - 247 ... End of System Exclusive

![](K9/sysex.png)

##### Quarter Frame time code (wiedergabe)


When the time is running continuously, the 32-bit time code is broken into 8 4-bit pieces, and one piece is transmitted each quarter frame. I.e. 96—120 times per second, depending on the frame rate. Since it takes eight quarter frames for a complete time code message, the complete SMPTE time is updated every two frames. A quarter-frame messages consists of a status byte of 0xF1, followed by a single 7-bit data value: 3 bits to identify the piece, and 4 bits of partial time code. When time is running forward, the piece numbers increment from 0–7; with the time that piece 0 is transmitted is the coded instant, and the remaining pieces are transmitted later.

- f1 - MIDI Quarter frame Status Byte

![](K9/quarter_spec.png)

![](K9/quarter.png)



## Max als Sync Master


### MIDI Clock + MMC
![](K9/mmc_master.png)

### SPP
![](K9/spp_master.png)


## MIDI Sequencer in Max

![MIDI](K9/seq.png)

### seq

![](K9/seq_mario.png)

### detonate

![detonate](K9/detonate.png)
